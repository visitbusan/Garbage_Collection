# 가비지 컬렉션 GC

가비지 컬렉션을 사용하는이유<br>

1. 필요없는(사용하지 않는) 메모리를 해제해주지 않으면 memory leak(메모리 누수)이 발생한다.<br>
2. 사용 중이던 메모리를 해제해버리면 프로그램이 중단되고, 데이터가 손실될 수 있다.<br>

무한대가 아닌 하드웨어의 메모리를 낭비하지 않기 위함이다.<br>

C나 C++ 같은 저수준의 언어는 malloc(), free()와 같이 메모리를 직접적으로 관리하는 함수들을 사용해 메모리 할당과 해제를 했었다.<br>
현대적인 언어로 오면서 메모리 관리는 점차 사람이 하지 않는 쪽으로 바뀌었다.<br>
파이썬에서 이를 해주는 것이 바로 가비지 콜렉터(Garbage Collector)이다<br>


파이썬의 GC<br>
python에서 주로 사용하는 메모리 관리법은 레퍼런스 카운팅(Reference Counting)이다. 쉽게 말해 우리가 객체를 만들 때 그것이 얼마나 자주 사용되는지 카운트하는 것이다. 생명주기를 카운트 해서 생명주기가 0이되면 메모리에서 삭제한다.<br>
즉, 파이썬은 객체를 생성해서 사용할 때마다 해당 객체의 reference count를 1씩 증가시키고, 해제할 때 1씩 감소시킨다. 이것이 0이 되면 객체의 메모리 할당이 해제된다.


GC와 프로그램의 성능<br>
GC는 프로그램의 성능에 영향을 미친다.<br>
가비지 컬렉션을 수행하려면 프로그램을 완전히 중지해야 한다.<br>
따라서 객체가 많을수록 가비지를 컬렉션하기 위해 더 많은 시간이 필요하다.<br>
가비지 컬렉션 주기가 짧다면 여유 메모리를 확보할 순 있지만 프로그램이 중단되는 상황이 많이 발생한다.<br>
반대로 주기가 길다면 프로그램이 자주 중단되지는 않지만 메모리 공간에 가비지가 많이 쌓이게 된다.


메모리 누수 예제(코드참조)<br>

1. 객체가 순환 참조할 경우<br>
 순환 참조는 객체가 자기 자신을 가리키는 것을 말한다.<br>
2. 서로를 참조하는 객체<br>
<br>
예제 코드 https://replit.com/@visitbusan/GC#main.py
<br>


참고문헌<br>
https://twinparadox.tistory.com/623<br>
https://dingrr.com/blog/post/python-garbage-collector<br>
https://blog.winterjung.dev/2018/02/18/python-gc#2-%EA%B0%80%EB%B9%84%EC%A7%80-%EC%BB%AC%EB%A0%89%EC%85%98%EC%9D%98-%EC%9E%91%EB%8F%99-%EB%B0%A9%EC%8B%9D<br>
